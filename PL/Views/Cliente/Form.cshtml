@model BL.Amortizacion
@{
    ViewBag.Title = "Form";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<link rel="stylesheet" href="http://jqueryui.com/resources/demos/style.css">
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>

<div class="container">
    <div class="row">
        <div class="col-md-12">
            <h1>Registro Cliente</h1>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12">
            @using (Html.BeginForm("FormAdd", "Cliente", FormMethod.Post, new { enctype = "multipart/form-data" }))
            {
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            @Html.LabelFor(model => model.Credito.Cliente.Nombre)
                            @Html.TextBoxFor(model => model.Credito.Cliente.Nombre, new { @class = "form-control", @id = "Nombre", @onkeypress = "return SoloLetras(event)" })
                            @Html.ValidationMessageFor(model => model.Credito.Cliente.Nombre)
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="form-group">
                            @Html.LabelFor(model => model.Credito.Cliente.ApellidoPaterno)
                            @Html.TextBoxFor(model => model.Credito.Cliente.ApellidoPaterno, new { @class = "form-control", @id = "ApellidoPaterno", @onkeypress = "return SoloLetras(event)" })
                            @Html.ValidationMessageFor(model => model.Credito.Cliente.ApellidoPaterno)
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="form-group">
                            @Html.LabelFor(model => model.Credito.Cliente.ApellidoMaterno)
                            @Html.TextBoxFor(model => model.Credito.Cliente.ApellidoMaterno, new { @class = "form-control", @id = "ApellidoMaterno", @onkeypress = "return SoloLetras(event)" })
                            @Html.ValidationMessageFor(model => model.Credito.Cliente.ApellidoMaterno)
                        </div>
                    </div>



                    <div class="col-md-4">
                        <div class="form-group">
                            @Html.LabelFor(model => model.Credito.Cliente.FechaNacimiento)
                            @Html.TextBoxFor(model => model.Credito.Cliente.FechaNacimiento, new { @class = "form-control", @id = "datepicker" })
                            @Html.ValidationMessageFor(model => model.Credito.Cliente.FechaNacimiento)
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="form-group">
                            @Html.LabelFor(model => model.Credito.NumeroCredito)
                            @Html.TextBoxFor(model => model.Credito.NumeroCredito, new { @class = "form-control", @id = "NumeroCredito", @onkeypress = "return SoloNumeros(event)" })
                            @Html.ValidationMessageFor(model => model.Credito.NumeroCredito)
                        </div>
                    </div>




                    <div class="col-md-4">
                        <div class="form-group">
                            @Html.LabelFor(model => model.Credito.ImporteCredito)
                            @Html.TextBoxFor(model => model.Credito.ImporteCredito, new { @class = "form-control", @id = "ImporteCredito", @onkeypress = "return SoloNumeros(event)" })
                            @Html.ValidationMessageFor(model => model.Credito.ImporteCredito)
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="form-group">
                            @Html.LabelFor(model => model.Credito.Plazo)
                            @Html.TextBoxFor(model => model.Credito.Plazo, new { @class = "form-control", @id = "Plazo", @onkeypress = "return SoloNumeros(event)" })
                            @Html.ValidationMessageFor(model => model.Credito.Plazo)
                        </div>
                    </div>



                    <div class="form-group">
                        <div class="col-md-4">
                            @Html.LabelFor(model => model.Credito.TasaAnual)
                            @Html.TextBoxFor(model => model.Credito.TasaAnual, new { @class = "form-control", @id = "TasaAnual", @onkeypress = "return SoloNumeros(event)" })
                            @Html.ValidationMessageFor(model => model.Credito.TasaAnual)
                        </div>
                    </div>

                    
                    

                </div>
                <br />
                <div class="row">
                        <div class="col-md-12">
                                @if (Model.NumeroPago != 0)
                                {
                                    <h3>Tabla de Amortizacion del Cliente</h3>
                                }
                        </div>
                    </div>
                
                <div class="row">
                        <div class="col-md-12">
                            @if (Model.NumeroPago != 0)
                            {
                                <p></p>


                                <table class="table table-bordered table-striped">
                                    <thead>
                                        <tr>
                                            <td>RFC</td>
                                            <td>Numero de Pago</td>
                                            <td>Pago Mensual</td>
                                            <td>Capital Amortizado</td>
                                            <td>Interes del Periodo</td>
                                            <td>Saldo Insoluto</td>
                                            <td>Numero de Credito</td>
                                        </tr>
                                    </thead>
                                    <tbody>

                                        <tr>
                                            <td>@Model.Credito.Cliente.RFC</td>
                                            <td>@Model.NumeroPago</td>
                                            <td>@Model.PagoMensual</td>
                                            <td>@Model.CapitalAmortizado</td>
                                            <td>@Model.InteresPeriodo</td>
                                            <td>@Model.SaldoInsoluto</td>
                                            <td>@Model.Credito.NumeroCredito</td>
                                        </tr>

                                    </tbody>
                                </table>
                            }
                        </div>
                    </div>

                <div class="row">
                    <div class="form-group">
                        <div class="col-md-5">
                            @if (Model.NumeroPago == 0)
                            {
                                <input type="submit" onclick="return Validation()" value="Guardar" class="btn btn-success" />
                            }
                            @Html.ActionLink("Regresar", "GetAll", "Cliente", htmlAttributes: new { @class = "btn btn-danger" })
                        </div>
                    </div>
                </div>

            }
        </div>
    </div>


</div>


<script type="text/javascript">
    var j = jQuery.noConflict();
    j(function () {
        j("#datepicker").datepicker(
           {
               dateFormat: 'dd-mm-yy',
               changeMonth: true,
               changeYear: true
           });
        $(".ui-datepicker-trigger").css("width", "30px")
        $(".ui-datepicker-trigger").css("height", "30px")
    });


</script>

<script type="text/javascript">
    function Validation() {
        document.getElementById("Nombre").required = true;
        document.getElementById("ApellidoPaterno").required = true;
        document.getElementById("ApellidoMaterno").required = true;
        document.getElementById("FechaNacimiento").required = true;
        document.getElementById("NumeroCredito").required = true;
        document.getElementById("Plazo").required = true;
        document.getElementById("TasaAnual").required = true;
    }

    function SoloLetras(e) {
        var key = e.keyCode || e.which;
        var letra = String.fromCharCode(key).toLowerCase();
        var caracter = e.key;
        if (!/^[a-zA-Z]*$/g.test(letra)) {
            alert("Solo se aceptan letras");
            return false;

        }
        else {
            return true;
        }
    }

    function SoloNumeros(e) {
        var key = e.keyCode || e.which;
        var numero = String.fromCharCode(key).toLowerCase();
        var caracter = e.key;
        if (!/^[0-9]*$/g.test(numero)) {
            alert("Solo se aceptan numeros");
            return false;

        }
        else {
            return true;
        }
    }

</script>